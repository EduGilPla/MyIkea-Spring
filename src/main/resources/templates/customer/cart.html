<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrito</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>
<body>
<nav th:insert="~{layout/navbar.html}"></nav>
<main class="container mt-4">
  <table class="table mt-3">
    <thead class="table-dark">
    <th>#</th>
    <th>Nombre</th>
    <th>Precio unidad</th>
    <th>Imagen</th>
    <th>Cantidad</th>
    <th>Precio total</th>
    <th>Accion</th>
    </thead>
    <tbody>
    <tr th:each="product : ${cart}">
      <td th:text="${cart.indexOf(product)+1}"></td>
      <td th:text="${product.product_name}"></td>
      <td th:text="${product.product_price} + '€'"></td>
      <td><img src="" th:src="@{|/images/${product.product_picture}|}" width="100px" height="100px"></td>
      <td th:text="${product.quantity}"></td>
      <td th:text="${product.quantity * product.product_price} + '€'"></td>
      <td>
        <a th:href="@{|/removeFromCart/${product.product_id}|}" class="btn btn-danger">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart-dash" viewBox="0 0 16 16">
            <path d="M6.5 7a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4z"/>
            <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
          </svg>
        </a>
      </td>
    </tr>
    </tbody>
  </table>
  <div>
    <h3 th:text="'Total: ' + ${totalPrice} + '€'"></h3>
    <a href="/order" class="btn btn-primary">Hacer pedido</a>
  </div>
  <span th:text="${error}" class="text-danger"></span>
</main>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD" crossorigin="anonymous"></script>
</body>
</html>